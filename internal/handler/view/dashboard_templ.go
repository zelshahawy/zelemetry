// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package view

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func Dashboard() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<!doctype html><html lang=\"en\"><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"><title>Zelemetry</title><style>\n    :root {\n      --bg: #010a20;\n      --bg-soft: #06132f;\n      --panel: #051127;\n      --panel-2: #081833;\n      --border: #1a2f56;\n      --text: #e8eefb;\n      --muted: #8ea2c9;\n      --good: #2cdc7f;\n      --bad: #f15668;\n      --warn: #f0ba4c;\n      --brand: #d7f09f;\n      --link: #79a9ff;\n    }\n\n    * { box-sizing: border-box; }\n    body {\n      margin: 0;\n      background: radial-gradient(1200px 600px at 10% -20%, #102851 0%, transparent 65%), var(--bg);\n      color: var(--text);\n      font-family: \"Sora\", \"Manrope\", \"Segoe UI\", sans-serif;\n    }\n\n    .app {\n      min-height: 100vh;\n      display: grid;\n      grid-template-rows: auto 1fr auto;\n    }\n\n    .container {\n      max-width: 1120px;\n      margin: 0 auto;\n      width: 100%;\n      padding: 0 16px;\n    }\n\n    .header {\n      border-bottom: 1px solid var(--border);\n      background: rgba(1, 9, 28, 0.72);\n      backdrop-filter: blur(8px);\n    }\n    .header-inner {\n      height: 84px;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      gap: 12px;\n    }\n    .brand {\n      display: flex;\n      gap: 12px;\n      align-items: center;\n    }\n    .brand-mark {\n      font-weight: 800;\n      font-size: 2.1rem;\n      letter-spacing: -0.05em;\n      color: var(--brand);\n      line-height: 1;\n    }\n    .brand-title {\n      margin: 0;\n      font-size: 1.7rem;\n      line-height: 1;\n      letter-spacing: -0.02em;\n    }\n    .brand-sub {\n      margin: 4px 0 0;\n      color: var(--muted);\n      font-size: 0.92rem;\n    }\n\n    .nav {\n      display: flex;\n      gap: 22px;\n    }\n    .nav a {\n      color: var(--text);\n      text-decoration: none;\n      font-weight: 600;\n      opacity: 0.92;\n    }\n\n    .content {\n      padding: 28px 0 24px;\n    }\n\n    .title {\n      font-size: 3rem;\n      line-height: 1;\n      margin: 0;\n      letter-spacing: -0.03em;\n    }\n    .subtitle {\n      margin: 10px 0 20px;\n      color: var(--muted);\n      font-size: 1.1rem;\n    }\n\n    .toolbar {\n      display: grid;\n      grid-template-columns: 1fr 180px 160px 130px;\n      gap: 10px;\n      padding: 12px;\n      border: 1px solid var(--border);\n      border-radius: 12px;\n      background: linear-gradient(180deg, var(--panel), #040f25);\n      margin-bottom: 16px;\n    }\n\n    .field,\n    .btn {\n      height: 44px;\n      border-radius: 9px;\n      border: 1px solid #21385f;\n      background: #040f25;\n      color: var(--text);\n      font: inherit;\n      padding: 0 12px;\n    }\n    .field::placeholder { color: #5f74a0; }\n\n    .btn {\n      cursor: pointer;\n      font-weight: 600;\n      background: #0b1f44;\n    }\n    .btn:hover { border-color: #3b5f96; }\n\n    .add {\n      border: 1px solid var(--border);\n      border-radius: 12px;\n      padding: 12px;\n      background: linear-gradient(180deg, #06152f, #041028);\n      margin-bottom: 14px;\n    }\n    .add-grid {\n      display: grid;\n      grid-template-columns: repeat(5, minmax(0, 1fr));\n      gap: 8px;\n      margin-bottom: 8px;\n    }\n    .add-actions {\n      display: flex;\n      align-items: center;\n      gap: 10px;\n    }\n    .hint { color: var(--muted); font-size: 0.86rem; }\n    .err { color: #ff8e96; font-size: 0.86rem; margin-top: 8px; }\n\n    .cards {\n      display: grid;\n      grid-template-columns: repeat(3, minmax(0, 1fr));\n      gap: 12px;\n      align-items: start;\n    }\n\n    .card {\n      border: 1px solid var(--border);\n      border-radius: 12px;\n      background: linear-gradient(180deg, #041028 0%, #030e22 100%);\n      padding: 14px;\n      display: grid;\n      gap: 10px;\n      min-height: 208px;\n      align-self: start;\n    }\n    .card-head {\n      display: flex;\n      justify-content: space-between;\n      gap: 10px;\n      align-items: flex-start;\n    }\n    .name {\n      margin: 0;\n      font-size: 1.9rem;\n      line-height: 1;\n      letter-spacing: -0.02em;\n    }\n    .meta {\n      margin-top: 5px;\n      color: var(--muted);\n      font-size: 0.98rem;\n      word-break: break-word;\n    }\n\n    .pill {\n      border-radius: 999px;\n      padding: 5px 11px;\n      font-size: 0.82rem;\n      font-weight: 700;\n      display: inline-flex;\n      align-items: center;\n      gap: 6px;\n      white-space: nowrap;\n    }\n    .pill::before {\n      content: \"\";\n      width: 7px;\n      height: 7px;\n      border-radius: 999px;\n      background: currentColor;\n    }\n    .up { color: #26dd7b; background: rgba(38, 221, 123, 0.16); }\n    .down { color: #ff6676; background: rgba(255, 102, 118, 0.16); }\n    .unknown { color: #f3c35f; background: rgba(243, 195, 95, 0.18); }\n\n    .strip {\n      height: 44px;\n      border: 1px solid #1f3560;\n      border-radius: 9px;\n      background-size: 10px 100%;\n    }\n    .strip.up {\n      background-image: repeating-linear-gradient(to right,\n        rgba(43, 219, 123, 0.96) 0,\n        rgba(43, 219, 123, 0.96) 6px,\n        rgba(43, 219, 123, 0.22) 6px,\n        rgba(43, 219, 123, 0.22) 10px);\n    }\n    .strip.down {\n      background-image: repeating-linear-gradient(to right,\n        rgba(241, 86, 104, 0.98) 0,\n        rgba(241, 86, 104, 0.98) 6px,\n        rgba(241, 86, 104, 0.22) 6px,\n        rgba(241, 86, 104, 0.22) 10px);\n    }\n    .strip.unknown {\n      background-image: repeating-linear-gradient(to right,\n        rgba(168, 182, 206, 0.95) 0,\n        rgba(168, 182, 206, 0.95) 6px,\n        rgba(168, 182, 206, 0.25) 6px,\n        rgba(168, 182, 206, 0.25) 10px);\n    }\n\n    .stats {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 7px;\n      color: var(--muted);\n      font-size: 0.88rem;\n    }\n    .stats strong { color: var(--text); font-weight: 700; }\n\n    details {\n      border-top: 1px solid #17345f;\n      padding-top: 8px;\n    }\n    summary {\n      color: var(--link);\n      cursor: pointer;\n      font-weight: 600;\n      font-size: 0.9rem;\n    }\n    .settings {\n      margin-top: 8px;\n      display: grid;\n      gap: 8px;\n    }\n    .settings-grid {\n      display: grid;\n      grid-template-columns: repeat(2, minmax(0, 1fr));\n      gap: 8px;\n    }\n    .actions {\n      display: flex;\n      gap: 8px;\n      flex-wrap: wrap;\n    }\n\n    .footer {\n      border-top: 1px solid var(--border);\n      color: var(--muted);\n      text-align: center;\n      padding: 18px 12px;\n      font-size: 0.9rem;\n      background: #010a1f;\n    }\n\n    @media (max-width: 1100px) {\n      .cards { grid-template-columns: repeat(2, minmax(0, 1fr)); }\n      .toolbar { grid-template-columns: 1fr 1fr; }\n      .add-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }\n    }\n\n    @media (max-width: 720px) {\n      .cards { grid-template-columns: 1fr; }\n      .toolbar { grid-template-columns: 1fr; }\n      .add-grid { grid-template-columns: 1fr; }\n      .settings-grid, .stats { grid-template-columns: 1fr; }\n      .title { font-size: 2.2rem; }\n      .brand-title { font-size: 1.35rem; }\n      .header-inner { height: auto; padding: 12px 0; }\n    }\n  </style></head><body><div class=\"app\"><header class=\"header\"><div class=\"container header-inner\"><div class=\"brand\"><div class=\"brand-mark\">ZN</div><div><h1 class=\"brand-title\">Zelemetry</h1><p class=\"brand-sub\">System Monitoring Dashboard</p></div></div><nav class=\"nav\"><a href=\"#\">Home</a></nav></div></header><main class=\"content\"><div class=\"container\"><h2 class=\"title\">Health Dashboard</h2><p class=\"subtitle\">Monitor the health of your endpoints in real-time</p><section class=\"toolbar\"><input id=\"search\" class=\"field\" type=\"text\" placeholder=\"Search endpoints...\"> <select id=\"filter\" class=\"field\"><option value=\"all\">Filter: None</option> <option value=\"UP\">Healthy</option> <option value=\"DOWN\">Unhealthy</option> <option value=\"UNKNOWN\">Unknown</option></select> <select id=\"sort\" class=\"field\"><option value=\"name\">Sort: Name</option> <option value=\"status\">Sort: Status</option> <option value=\"latency\">Sort: Latency</option></select> <button id=\"runAll\" class=\"btn\" type=\"button\">Check All</button></section><section class=\"add\"><form id=\"addForm\"><div class=\"add-grid\"><input class=\"field\" name=\"name\" type=\"text\" placeholder=\"Name (optional)\"> <input class=\"field\" name=\"base_url\" type=\"url\" placeholder=\"https://example.com\" required> <input class=\"field\" name=\"route\" type=\"text\" placeholder=\"/health\"> <input class=\"field\" name=\"check_interval_seconds\" type=\"number\" min=\"5\" value=\"60\" required> <input class=\"field\" name=\"timeout_ms\" type=\"number\" min=\"100\" step=\"100\" value=\"5000\" required></div><div class=\"add-actions\"><label><input type=\"checkbox\" name=\"enabled\" checked> Enabled</label> <button class=\"btn\" type=\"submit\">Add Website</button> <span class=\"hint\">Actions are async: no full page reload.</span></div><div id=\"addError\" class=\"err\"></div></form></section><section id=\"cards\" class=\"cards\"></section></div></main><footer class=\"footer\">Powered by Zelemetry</footer></div><script>\n    const state = { websites: [] };\n\n    const el = {\n      cards: document.getElementById('cards'),\n      search: document.getElementById('search'),\n      filter: document.getElementById('filter'),\n      sort: document.getElementById('sort'),\n      runAll: document.getElementById('runAll'),\n      addForm: document.getElementById('addForm'),\n      addError: document.getElementById('addError')\n    };\n\n    function esc(value) {\n      return String(value || '').replace(/[&<>'\"]/g, (ch) => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', \"'\": '&#39;', '\"': '&quot;' }[ch]));\n    }\n\n    function statusClass(status) {\n      if (status === 'UP') return 'up';\n      if (status === 'DOWN') return 'down';\n      return 'unknown';\n    }\n\n    function statusLabel(status) {\n      if (status === 'UP') return 'Healthy';\n      if (status === 'DOWN') return 'Unhealthy';\n      return 'Unknown';\n    }\n\n    function relativeTime(ts) {\n      if (!ts) return 'never';\n      const d = Math.max(0, Math.floor((Date.now() - new Date(ts).getTime()) / 1000));\n      if (d < 60) return d + 's ago';\n      if (d < 3600) return Math.floor(d / 60) + 'm ago';\n      if (d < 86400) return Math.floor(d / 3600) + 'h ago';\n      return new Date(ts).toLocaleString();\n    }\n\n    function buildCard(w) {\n      const cls = statusClass(w.last_status);\n      const enabledAttr = w.enabled ? 'checked' : '';\n      const errBlock = w.last_error ? '<div class=\"err\">' + esc(w.last_error) + '</div>' : '';\n\n      return ''\n        + '<article class=\"card\" data-name=\"' + esc(w.name) + '\" data-status=\"' + esc(w.last_status) + '\" data-latency=\"' + Number(w.last_response_ms || 0) + '\">'\n        + '  <div class=\"card-head\">'\n        + '    <div>'\n        + '      <h3 class=\"name\">' + esc(w.name) + '</h3>'\n        + '      <div class=\"meta\">' + esc(w.base_url) + (w.route ? ' â€¢ ' + esc(w.route) : '') + '</div>'\n        + '    </div>'\n        + '    <span class=\"pill ' + cls + '\">' + statusLabel(w.last_status) + '</span>'\n        + '  </div>'\n        + '  <div class=\"strip ' + cls + '\"></div>'\n        + '  <div class=\"stats\">'\n        + '    <div>HTTP: <strong>' + (w.last_http_status > 0 ? w.last_http_status : '-') + '</strong></div>'\n        + '    <div>Latency: <strong>' + (w.last_response_ms > 0 ? ('~' + w.last_response_ms + 'ms') : '-') + '</strong></div>'\n        + '    <div>From: <strong>' + (w.last_checked_at ? relativeTime(new Date(Date.parse(w.last_checked_at) - (w.check_interval_seconds * 1000)).toISOString()) : 'never') + '</strong></div>'\n        + '    <div>Now: <strong>' + relativeTime(w.last_checked_at) + '</strong></div>'\n        + '  </div>'\n        + errBlock\n        + '  <div class=\"actions\">'\n        + '    <form class=\"js-action\" action=\"/websites/' + w.id + '/check\" method=\"post\"><button class=\"btn\" type=\"submit\">Check</button></form>'\n        + '    <a class=\"btn\" href=\"' + esc(w.target_url) + '\" target=\"_blank\" rel=\"noreferrer\">Open</a>'\n        + '  </div>'\n        + '  <details data-id=\"' + w.id + '\">'\n        + '    <summary>Settings</summary>'\n        + '    <form class=\"js-action settings\" action=\"/websites/' + w.id + '/settings\" method=\"post\">'\n        + '      <div class=\"settings-grid\">'\n        + '        <input class=\"field\" name=\"name\" value=\"' + esc(w.name) + '\">'\n        + '        <input class=\"field\" name=\"route\" value=\"' + esc(w.route || '') + '\" placeholder=\"/health\">'\n        + '        <input class=\"field\" name=\"check_interval_seconds\" type=\"number\" min=\"5\" value=\"' + (w.check_interval_seconds || 60) + '\">'\n        + '        <input class=\"field\" name=\"timeout_ms\" type=\"number\" min=\"100\" step=\"100\" value=\"' + (w.timeout_ms || 5000) + '\">'\n        + '      </div>'\n        + '      <label><input type=\"checkbox\" name=\"enabled\" ' + enabledAttr + '> Enabled</label>'\n        + '      <div class=\"actions\"><button class=\"btn\" type=\"submit\">Save</button></div>'\n        + '    </form>'\n        + '    <form class=\"js-action\" action=\"/websites/' + w.id + '/delete\" method=\"post\">'\n        + '      <button class=\"btn\" type=\"submit\">Delete</button>'\n        + '    </form>'\n        + '  </details>'\n        + '</article>';\n    }\n\n    function getOpenDetailsIds() {\n      return Array.from(el.cards.querySelectorAll('details[data-id]'))\n        .filter((node) => node.open)\n        .map((node) => node.dataset.id);\n    }\n\n    function hasOpenDetails() {\n      return getOpenDetailsIds().length > 0;\n    }\n\n    function restoreOpenDetails(ids) {\n      if (!ids || !ids.length) return;\n      ids.forEach((id) => {\n        const node = el.cards.querySelector('details[data-id=\"' + id + '\"]');\n        if (node) node.open = true;\n      });\n    }\n\n    function render(openDetailsIds = []) {\n      const query = (el.search.value || '').toLowerCase().trim();\n      const filter = el.filter.value;\n      const sortBy = el.sort.value;\n\n      const data = state.websites\n        .filter((w) => {\n          const q = (w.name || '').toLowerCase().includes(query) || (w.base_url || '').toLowerCase().includes(query);\n          if (!q) return false;\n          if (filter === 'all') return true;\n          return w.last_status === filter;\n        })\n        .slice();\n\n      data.sort((a, b) => {\n        if (sortBy === 'latency') return Number(a.last_response_ms || 0) - Number(b.last_response_ms || 0);\n        if (sortBy === 'status') return String(a.last_status || '').localeCompare(String(b.last_status || ''));\n        return String(a.name || '').localeCompare(String(b.name || ''));\n      });\n\n      el.cards.innerHTML = data.length\n        ? data.map(buildCard).join('')\n        : '<article class=\"card\"><div class=\"hint\">No websites found.</div></article>';\n      restoreOpenDetails(openDetailsIds);\n    }\n\n    async function postForm(action, formData) {\n      const res = await fetch(action, { method: 'POST', body: formData });\n      if (!res.ok) {\n        const text = await res.text();\n        throw new Error(text || ('Request failed: ' + res.status));\n      }\n    }\n\n    async function refreshWebsites() {\n      const openDetailsIds = getOpenDetailsIds();\n      const res = await fetch('/api/websites', { headers: { 'Accept': 'application/json' } });\n      if (!res.ok) return;\n      state.websites = await res.json();\n      render(openDetailsIds);\n    }\n\n    el.search.addEventListener('input', render);\n    el.filter.addEventListener('change', render);\n    el.sort.addEventListener('change', render);\n\n    el.runAll.addEventListener('click', async () => {\n      el.runAll.disabled = true;\n      try {\n        await postForm('/checks/run', new FormData());\n        await refreshWebsites();\n      } catch (e) {\n        alert(e.message || 'Check all failed');\n      } finally {\n        el.runAll.disabled = false;\n      }\n    });\n\n    el.addForm.addEventListener('submit', async (event) => {\n      event.preventDefault();\n      el.addError.textContent = '';\n      try {\n        await postForm('/websites', new FormData(el.addForm));\n        el.addForm.reset();\n        el.addForm.querySelector('input[name=\"enabled\"]').checked = true;\n        await refreshWebsites();\n      } catch (e) {\n        el.addError.textContent = e.message || 'Failed to add website';\n      }\n    });\n\n    el.cards.addEventListener('submit', async (event) => {\n      const form = event.target.closest('.js-action');\n      if (!form) return;\n      event.preventDefault();\n\n      if (form.action.includes('/delete') && !confirm('Delete this website?')) {\n        return;\n      }\n\n      const submitBtn = form.querySelector('button[type=\"submit\"]');\n      if (submitBtn) submitBtn.disabled = true;\n\n      try {\n        await postForm(form.action, new FormData(form));\n        await refreshWebsites();\n      } catch (e) {\n        alert(e.message || 'Request failed');\n      } finally {\n        if (submitBtn) submitBtn.disabled = false;\n      }\n    });\n\n    refreshWebsites();\n    setInterval(() => {\n      // Do not rerender cards while the user is editing settings.\n      if (hasOpenDetails()) return;\n      refreshWebsites();\n    }, 7000);\n  </script></body></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
